{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "New project",
  "architectural_notes": [
    "Admin question editor should preserve in-progress form state across tab/page navigation (avoid refresh/reset; consider draft persistence)."
  ],
  "known_issues": [
    "Admin page: while adding/editing a question, switching to another browser page and returning refreshes the form and loses unsaved input; started after adding a .jpg to a question."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-prevent-the-quiz-editor-form-from-resetting-unsaved-local-question-edits-when-the-browser-tab-window-loses-focus-and-then-regains-focus-e-g-user-switches-to-another-page-tab-and-returns-by-ensuring-the-questions-query-does-not-refetch-on-window-focus-and-overwrite-in-progress-edits",
      "title": "Prevent the Quiz Editor form from resetting unsaved local question edits when the browser tab/window loses focus and then regains focus (e.g., user switches to another page/tab and returns) by ensuring the questions query does not refetch on window focus and overwrite in-progress edits.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-server-fetched-questions-do-not-overwrite-in-progress-local-edits-in-quizeditor-when-react-query-updates-refetches-the-questions-data-including-after-background-refetches-invalidations-or-image-attachment-flow-by-guarding-the-sync-localquestions-from-questions-effect-so-it-does-not-run-when-there-are-unsaved-changes",
      "title": "Ensure server-fetched questions do not overwrite in-progress local edits in QuizEditor when React Query updates/refetches the questions data (including after background refetches, invalidations, or image attachment flow), by guarding the \"sync localQuestions from questions\" effect so it does not run when there are unsaved changes.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-add-draft-persistence-for-in-progress-question-edits-in-the-quiz-editor-so-that-accidental-reloads-or-navigations-do-not-lose-unsaved-input-persist-to-browser-storage-keyed-by-quizid-and-restore-automatically-when-returning-to-the-editor-with-clear-english-ui-text-to-resume-discard-the-draft-if-the-server-version-differs",
      "title": "Add draft persistence for in-progress question edits in the Quiz Editor so that accidental reloads or navigations do not lose unsaved input; persist to browser storage keyed by quizId and restore automatically when returning to the editor, with clear English UI text to resume/discard the draft if the server version differs.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Fix admin page question editor losing unsaved input when navigating away/returning (regression after adding .jpg image)",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "projectName": "Prevent Quiz Editor from losing unsaved question edits when switching tabs (regression after adding JPG)",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}